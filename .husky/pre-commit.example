#!/bin/sh
# Exemple de hook pre-commit pour validation automatique
# Pour l'activer :
# 1. Installer husky : npm install --save-dev husky
# 2. Initialiser : npx husky init
# 3. Copier ce fichier vers .husky/pre-commit
# 4. Rendre exÃ©cutable : chmod +x .husky/pre-commit

echo "ğŸ” Validation prÃ©-commit en cours..."
echo ""

# 1ï¸âƒ£ TypeScript Check
echo "1ï¸âƒ£ VÃ©rification TypeScript..."
npx tsc --noEmit
if [ $? -ne 0 ]; then
  echo "âŒ Erreurs TypeScript dÃ©tectÃ©es. Commit annulÃ©."
  exit 1
fi
echo "âœ… TypeScript OK"
echo ""

# 2ï¸âƒ£ ESLint Check
echo "2ï¸âƒ£ VÃ©rification ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ Erreurs ESLint dÃ©tectÃ©es. Commit annulÃ©."
  exit 1
fi
echo "âœ… ESLint OK"
echo ""

# 3ï¸âƒ£ Prettier Check
echo "3ï¸âƒ£ VÃ©rification Prettier..."
npm run format:check
if [ $? -ne 0 ]; then
  echo "âŒ Fichiers non formatÃ©s dÃ©tectÃ©s."
  echo "ğŸ’¡ ExÃ©cutez 'npm run format' pour corriger automatiquement."
  exit 1
fi
echo "âœ… Prettier OK"
echo ""

echo "âœ… âœ… âœ… Toutes les validations sont passÃ©es ! âœ… âœ… âœ…"
echo "ğŸš€ Commit autorisÃ©."
